import{n as T,r as m,j as t,R as H,e as D,u as P,k as Q,o as Z,h as z,p as K,d as w,i as _,q as $,t as ee,v as te,L as se,O as ae}from"./index-35547de2.js";import{C as F}from"./chevron-down-9537f424.js";import{a as O}from"./axios-06ab4b27.js";const G=T("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),ne=T("ListFilter",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M7 12h10",key:"b7w52i"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),ce={theme:"system",setTheme:()=>null},oe=m.createContext(ce);function re({children:h,defaultTheme:d="system",storageKey:i="vite-ui-theme",...p}){const[l,k]=m.useState(()=>localStorage.getItem(i)||d);m.useEffect(()=>{const o=window.document.documentElement;if(o.classList.remove("light","dark"),l==="system"){const n=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";o.classList.add(n);return}o.classList.add(l)},[l]);const j={theme:l,setTheme:o=>{localStorage.setItem(i,o),k(o)}};return t.jsx(oe.Provider,{...p,value:j,children:h})}const le="/central/DICT.png",ie=()=>{const[h,d]=H.useState(!0),i=D(),p=P(Q),l=[{name:"Business Permit V1"},{name:"Business Permit V2"},{name:"Building Permit"},{name:"Certificate of Occupancy"},{name:"Working Permit"},{name:"Barangay Clearance"}],k=()=>{d(!h)},j=o=>{const n=p.includes(o)?p.filter(f=>f!==o):[...p,o];i(Z(n))};return t.jsxs("div",{className:h?"relative mt-2 outline-none w-full h-[270px] rounded-[100px]":"rounded-none mt-2 outline-none relative w-full",children:[t.jsx("div",{className:"border-gray-300 outline-none mt-2 border-x-0 border-y-2 rounded-none",children:t.jsxs("button",{onClick:k,className:"w-full text-left outline-none rounded-none text-white px-4 py-2 focus:outline-none flex justify-between font-gsemibold",children:["eLGU Services ",t.jsx("span",{children:h?t.jsx(G,{className:"rotate-90"}):t.jsx(F,{})})]})}),h&&t.jsx("div",{className:"absolute w-full outline-none text-white pb-2 pt-2",children:l.map((o,n)=>t.jsxs("label",{className:"flex items-center px-4 py-2 text-sm cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:p.includes(o.name),onChange:()=>j(o.name),className:"mr-2 h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),o.name]},n))})]})},de=()=>{const h=D(),d=P(z),[i,p]=m.useState(!0),[l,k]=m.useState(()=>{const n=localStorage.getItem("charts");return n?JSON.parse(n):d.length?d:[{name:"Bar Graph",state:!0},{name:"Line Graph",state:!0},{name:"Pie Graph",state:!0}]});m.useEffect(()=>{h(K(l.filter(n=>n.state).map(n=>n.name))),localStorage.setItem("charts",JSON.stringify(l))},[l,h]);const j=()=>{p(!i)},o=n=>{k(f=>f.map(y=>y.name===n?{...y,state:!y.state}:y))};return t.jsxs("div",{className:i?"relative w-full h-[270px] rounded-[100px]":"rounded-none relative w-full",children:[t.jsx("div",{className:"border-gray-300 outline-none mt-2 border-x-0 border-y-2 rounded-none",children:t.jsxs("button",{onClick:j,className:"w-full text-left rounded-none text-white px-4 py-2 focus:outline-none flex justify-between font-gsemibold",children:["Data Presentation"," ",t.jsx("span",{children:i?t.jsx(G,{className:" rotate-90"}):t.jsx(F,{})})]})}),i&&t.jsx("div",{className:"absolute w-full text-white border-gray-300 pb-2 pt-2",children:l.map((n,f)=>t.jsxs("label",{className:"flex items-center px-4 py-2 text-sm cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:n.state,onChange:()=>o(n.name),className:"mr-2 h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),n.name]},f))})]})},ue="data:image/png;base64,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";function pe(){const h=P(w),d=P(Q),i=P(_),p=D(),l=$(),k=ee(),j=m.useRef(null),o=[{name:"Reports",path:"/central/reports"},{name:"Utilization Status",path:"/central/utilization"},{name:"LGU",path:"/central/lgu"}],[n,f]=m.useState({}),y=(a,r,g)=>{if(!(r!=null&&r.length)||!a)return console.log("No dates or stats to filter"),a;const u=[...r].sort(),b=u[0],s=u[u.length-1],[e,c]=b.split("-").map(Number),[v,U]=s.split("-").map(Number),B=[];let R=new Date(e,c-1);const J=new Date(v,U-1);for(;R<=J;)B.push(`${R.getFullYear()}-${String(R.getMonth()+1).padStart(2,"0")}`),R.setMonth(R.getMonth()+1);const I={};return Object.entries(a).forEach(([q,S])=>{S&&(I[q]=S.filter(C=>B.includes(C.date)).map(C=>{const A={};return C.values.forEach(x=>{if(g.includes(x.dictRo))switch(A[x.dictRo]||(A[x.dictRo]={operational:0,developmental:0,training:0,withdraw:0}),x.universalStatus){case"[A] Operational":A[x.dictRo].operational++;break;case"[B] Developmental":A[x.dictRo].developmental++;break;case"[C] For Training/Others":A[x.dictRo].training++;break;case"[D] Withdraw":A[x.dictRo].withdraw++;break}}),{date:C.date,data:Object.entries(A).map(([x,V])=>({region:x,...V}))}}).sort((C,A)=>C.date.localeCompare(A.date)))}),I};m.useEffect(()=>{if(i&&i.length>0&&n){const a=y(n,i,h);p(te(a)),console.log("Filtered Monthly Stats:",a)}},[n,i,h]);function L(){O.get("18kaPQlN0_kA9i7YAD-DftbdVPZX35Qf33sVMkw_TcWc/values/BP1 UR Input",{headers:{Authorization:"Token b22ac5a9da3ddc5088984eb00e3b122cd2f6d057fcc84cb6ff81daaabd151fff"}}).then(a=>{const u=a.data.values.slice(3).reduce((s,e)=>{const c=e[1],v={id:e[0],lguName:e[4],status:e[5],progressRate:e[6],concerns:e[7],actionItems:e[8],otherRemarks:e[9],universalStatus:e[10],mpar:e[11],geocode:e[12],name:e[13],province:e[14],region:e[15],district:e[16],level:e[17],incomeClass:e[18],dictRo:e[19]};return s[c]||(s[c]={date:c,values:[]}),s[c].values.push(v),s},{}),b=Object.values(u);f(s=>({...s,BP:b}))})}function M(){O.get("18kaPQlN0_kA9i7YAD-DftbdVPZX35Qf33sVMkw_TcWc/values/BPCO UR Input",{headers:{Authorization:"Token b22ac5a9da3ddc5088984eb00e3b122cd2f6d057fcc84cb6ff81daaabd151fff"}}).then(a=>{const u=a.data.values.slice(3).reduce((s,e)=>{const c=e[1],v={id:e[0],lguName:e[4],status:e[5],progressRate:e[6],concerns:e[7],actionItems:e[8],otherRemarks:e[9],universalStatus:e[10],mpar:e[11],geocode:e[12],name:e[13],province:e[14],region:e[15],district:e[16],level:e[16],incomeClass:e[17],dictRo:e[18]};return s[c]||(s[c]={date:c,values:[]}),s[c].values.push(v),s},{}),b=Object.values(u);f(s=>({...s,CO:b}))})}function W(){O.get("18kaPQlN0_kA9i7YAD-DftbdVPZX35Qf33sVMkw_TcWc/values/WP UR Input",{headers:{Authorization:"Token b22ac5a9da3ddc5088984eb00e3b122cd2f6d057fcc84cb6ff81daaabd151fff"}}).then(a=>{const u=a.data.values.slice(3).reduce((s,e)=>{const c=e[1],v={id:e[0],lguName:e[4],status:e[5],progressRate:e[6],concerns:e[7],actionItems:e[8],otherRemarks:e[9],universalStatus:e[10],mpar:e[11],geocode:e[12],name:e[13],province:e[14],region:e[15],district:e[16],level:e[16],incomeClass:e[17],dictRo:e[18]};return s[c]||(s[c]={date:c,values:[]}),s[c].values.push(v),s},{}),b=Object.values(u);f(s=>({...s,WP:b}))})}function Y(){O.get("18kaPQlN0_kA9i7YAD-DftbdVPZX35Qf33sVMkw_TcWc/values/BC UR Input",{headers:{Authorization:"Token b22ac5a9da3ddc5088984eb00e3b122cd2f6d057fcc84cb6ff81daaabd151fff"}}).then(a=>{const u=a.data.values.slice(3).reduce((s,e)=>{const c=e[1],v={id:e[0],lguName:e[4],status:e[5],progressRate:e[6],concerns:e[7],actionItems:e[8],otherRemarks:e[9],universalStatus:e[10],mpar:e[11],geocode:e[12],name:e[13],province:e[14],region:e[15],district:e[16],level:e[16],incomeClass:e[17],dictRo:e[18]};return s[c]||(s[c]={date:c,values:[]}),s[c].values.push(v),s},{}),b=Object.values(u);f(s=>({...s,BC:b}))})}m.useEffect(()=>{f({}),d.includes("Building Permit")&&L(),d.includes("Certificate of Occupancy")&&M(),d.includes("Working Permit")&&W(),d.includes("Barangay Clearance")&&Y(),console.log("Selected services:",d)},[d]);const[X,N]=m.useState(()=>{const a=localStorage.getItem("activeMenuItem");if(a)return a;const r=l.pathname,g=o.find(u=>r.includes(u.path.split("/").pop()||""));return g?g.name:"Reports"});m.useEffect(()=>{const a=l.pathname,r=o.find(g=>a.includes(g.path.split("/").pop()||""));r&&(N(r.name),localStorage.setItem("activeMenuItem",r.name))},[l.pathname]);const E=(a,r)=>{N(a),localStorage.setItem("activeMenuItem",a),k(r)};return t.jsx(re,{defaultTheme:"light",storageKey:"vite-ui-theme",children:t.jsxs("div",{className:"min-h-screen w-full flex",children:[t.jsxs("nav",{className:"fixed top-0 left-0 w-[20vw] md:hidden h-screen bg-[#0136a8] z-[99999] flex flex-col items-start p-5",children:[t.jsx(se,{className:"flex w-full mr-5 gap-2",to:"/central/",children:t.jsx("img",{src:le,className:"logo h-20 object-contain self-center",alt:"DICT logo"})}),t.jsx("h1",{className:"text-white font-gmedium text-xl mt-10",children:"DATA DASHBOARD"}),t.jsxs("div",{className:"text-white flex gap-1 font-gmedium mt-4",children:[t.jsx(ne,{})," Filter"]}),t.jsx(ie,{}),t.jsx(de,{})]}),t.jsxs("div",{className:"flex-1 ml-[20vw] md:ml-0",ref:j,children:[t.jsxs("header",{className:"sticky top-0 z-50 md:hidden bg-white/20 backdrop-blur-md h-[100px] w-full px-20 flex items-center justify-between text-[#6B6B6B]",children:[t.jsx("ul",{className:"flex gap-10",children:o.map(a=>t.jsx("li",{onClick:()=>E(a.name,a.path),className:`border border-t-0 border-r-0 border-l-0 cursor-pointer ${X===a.name?"border-b-2 border-[#0136a8] font-gsemibold text-[#0136a8]":"border-b-0 hover:border-b-2 hover:border-[#0136a8] hover:font-gsemibold hover:text-[#0136a8]"}`,children:a.name},a.name))}),t.jsxs("div",{className:"flex gap-2 items-center",children:[t.jsx("img",{className:"rounded-full w-10 h-10",src:ue,alt:""}),t.jsx("div",{className:"font-gsemibold",children:"Welcome, (Juan)"})]})]}),t.jsx("main",{className:"w-full",children:t.jsx(ae,{})})]})]})})}export{pe as default};
