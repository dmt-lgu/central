import{u as v,s as C,r as i,j as a}from"./index-35547de2.js";import{_ as p,D as N,R as S}from"./react-apexcharts.min-7cbce75d.js";import{T as E,a as T,b as y,c as O,d as D,e as P}from"./table-2cd1e165.js";import{l as k}from"./index-f2d0276a.js";import"./chevron-down-9537f424.js";function R(){const n=v(C),[d,c]=i.useState([{name:"Operational",data:[0,0,0,0]},{name:"Developmental",data:[0,0,0,0]},{name:"For Training/Others",data:[0,0,0,0]},{name:"Withdraw",data:[0,0,0,0]}]);i.useEffect(()=>{(()=>{const e={WP:{operational:0,developmental:0,training:0,withdraw:0},CO:{operational:0,developmental:0,training:0,withdraw:0},BP:{operational:0,developmental:0,training:0,withdraw:0},BC:{operational:0,developmental:0,training:0,withdraw:0}};Object.entries(n).forEach(([t,l])=>{l.length>0&&l[l.length-1].data.forEach(s=>{e[t].operational+=s.operational,e[t].developmental+=s.developmental,e[t].training+=s.training,e[t].withdraw+=s.withdraw})}),c([{name:"Operational",data:[e.BP.operational,e.BC.operational,e.WP.operational,e.CO.operational]},{name:"Developmental",data:[e.BP.developmental,e.BC.developmental,e.WP.developmental,e.CO.developmental]},{name:"For Training/Others",data:[e.BP.training,e.BC.training,e.WP.training,e.CO.training]},{name:"Withdraw",data:[e.BP.withdraw,e.BC.withdraw,e.WP.withdraw,e.CO.withdraw]}])})()},[n]);const m={chart:{type:"bar"},plotOptions:{bar:{horizontal:!1}},xaxis:{categories:["Business Permit","Barangay Clearance","Working Permit","Certificate of Occupancy"],labels:{rotate:0}},yaxis:{title:{text:"Number of Permits"}},title:{text:"Comparison of Different Types of Permits (Most Recent)"},colors:["#0136A8","#F8CD1C","#CE1126","#72CFF1"]};return a.jsx("div",{className:"w-full md:w-[800px] flex justify-center p-10 z-0",children:a.jsx(p,{className:"w-full",options:m,series:d,type:"bar",height:350})})}function z(){const n=v(C),[d,c]=i.useState([{name:"Business Permit",values:[0,0,0,0]},{name:"Barangay Clearance",values:[0,0,0,0]},{name:"Working Permit",values:[0,0,0,0]},{name:"Certificate of Occupancy",values:[0,0,0,0]}]);i.useEffect(()=>{(()=>{const t={WP:{operational:0,developmental:0,training:0,withdraw:0},CO:{operational:0,developmental:0,training:0,withdraw:0},BP:{operational:0,developmental:0,training:0,withdraw:0},BC:{operational:0,developmental:0,training:0,withdraw:0}};Object.entries(n).forEach(([l,h])=>{const s=h[h.length-1];s&&s.data.forEach(o=>{t[l].operational+=o.operational,t[l].developmental+=o.developmental,t[l].training+=o.training,t[l].withdraw+=o.withdraw})}),c([{name:"Business Permit",values:[t.BP.operational,t.BP.developmental,t.BP.training,t.BP.withdraw]},{name:"Barangay Clearance",values:[t.BC.operational,t.BC.developmental,t.BC.training,t.BC.withdraw]},{name:"Working Permit",values:[t.WP.operational,t.WP.developmental,t.WP.training,t.WP.withdraw]},{name:"Certificate of Occupancy",values:[t.CO.operational,t.CO.developmental,t.CO.training,t.CO.withdraw]}])})()},[n]);const m=e=>{switch(e){case"Operational":return"#0136A8";case"Developmental":return"#F8CD1C";case"For Training/Others":return"#CE1126";case"Withdraw":return"#72CFF1";default:return"transparent"}},f=[{category:"Operational",color:"bg-gray-100 "},{category:"Developmental",color:"bg-white"},{category:"For Training/Others",color:"bg-gray-100 "},{category:"Withdraw",color:"bg-white"}];return a.jsx("div",{className:"w-full",children:a.jsxs(E,{className:"min-w-full bg-white border border-gray-200",children:[a.jsx(T,{className:"bg-white",children:a.jsxs(y,{className:"border-b",children:[a.jsx(O,{className:"py-2 px-4 border border-gray-200"}),d.map(e=>a.jsx(O,{className:"py-2 px-4 border border-gray-200",children:e.name},e.name))]})}),a.jsx(D,{children:f.map((e,t)=>a.jsxs(y,{className:`border-b ${e.color}`,children:[a.jsx(P,{className:"py-2 px-4 border border-gray-200",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-4 h-4 mr-2 border",style:{backgroundColor:m(e.category)}}),e.category]})}),d.map(l=>a.jsx(P,{className:"py-2 px-4 border border-gray-200",children:l.values[t]},l.name))]},e.category))})]})})}function M(){const n=v(C),[d,c]=i.useState([{name:"Operational",data:Array(12).fill(0)},{name:"Developmental",data:Array(12).fill(0)},{name:"For Training/Others",data:Array(12).fill(0)},{name:"Withdraw",data:Array(12).fill(0)}]),[m,f]=i.useState([{name:"Operational",data:Array(12).fill(0)},{name:"Developmental",data:Array(12).fill(0)},{name:"For Training/Others",data:Array(12).fill(0)},{name:"Withdraw",data:Array(12).fill(0)}]),[e,t]=i.useState([{name:"Operational",data:Array(12).fill(0)},{name:"Developmental",data:Array(12).fill(0)},{name:"For Training/Others",data:Array(12).fill(0)},{name:"Withdraw",data:Array(12).fill(0)}]),[l,h]=i.useState([{name:"Operational",data:Array(12).fill(0)},{name:"Developmental",data:Array(12).fill(0)},{name:"For Training/Others",data:Array(12).fill(0)},{name:"Withdraw",data:Array(12).fill(0)}]);i.useEffect(()=>{(()=>{const r={WP:{operational:Array(12).fill(0),developmental:Array(12).fill(0),training:Array(12).fill(0),withdraw:Array(12).fill(0)},CO:{operational:Array(12).fill(0),developmental:Array(12).fill(0),training:Array(12).fill(0),withdraw:Array(12).fill(0)},BP:{operational:Array(12).fill(0),developmental:Array(12).fill(0),training:Array(12).fill(0),withdraw:Array(12).fill(0)},BC:{operational:Array(12).fill(0),developmental:Array(12).fill(0),training:Array(12).fill(0),withdraw:Array(12).fill(0)}};Object.entries(n).forEach(([w,F])=>{F.forEach(b=>{const u=new Date(b.date).getMonth();b.data.forEach(x=>{r[w].operational[u]+=x.operational,r[w].developmental[u]+=x.developmental,r[w].training[u]+=x.training,r[w].withdraw[u]+=x.withdraw})})}),c([{name:"Operational",data:r.BP.operational},{name:"Developmental",data:r.BP.developmental},{name:"For Training/Others",data:r.BP.training},{name:"Withdraw",data:r.BP.withdraw}]),f([{name:"Operational",data:r.BC.operational},{name:"Developmental",data:r.BC.developmental},{name:"For Training/Others",data:r.BC.training},{name:"Withdraw",data:r.BC.withdraw}]),t([{name:"Operational",data:r.WP.operational},{name:"Developmental",data:r.WP.developmental},{name:"For Training/Others",data:r.WP.training},{name:"Withdraw",data:r.WP.withdraw}]),h([{name:"Operational",data:r.CO.operational},{name:"Developmental",data:r.CO.developmental},{name:"For Training/Others",data:r.CO.training},{name:"Withdraw",data:r.CO.withdraw}])})()},[n]);const o={chart:{type:"line",height:350},xaxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},yaxis:{title:{text:"Values"}},stroke:{curve:"straight"},markers:{size:5}},g=350,j={...o,title:{text:"Business Permit",align:"left"},colors:["#0136A8","#F8CD1C","#CE1126","#72CFF1"],chart:{height:g}},B={...o,title:{text:"Barangay Clearance",align:"left"},colors:["#0136A8","#F8CD1C","#CE1126","#72CFF1"],chart:{height:g}},A={...o,title:{text:"Working Permit",align:"left"},colors:["#0136A8","#F8CD1C","#CE1126","#72CFF1"],chart:{height:g}},W={...o,title:{text:"Certificate of Occupancy",align:"left"},colors:["#0136A8","#F8CD1C","#CE1126","#72CFF1"],chart:{height:g}};return a.jsxs("div",{className:"grid grid-cols-2 gap-4 w-full md:grid-cols-1",children:[a.jsx("div",{className:"bg-white rounded-lg border shadow-md p-3",children:a.jsx(p,{options:j,series:d,type:"line"})}),a.jsx("div",{className:"bg-white rounded-lg border shadow-md p-3",children:a.jsx(p,{options:B,series:m,type:"line"})}),a.jsx("div",{className:"bg-white rounded-lg border shadow-md p-3",children:a.jsx(p,{options:A,series:e,type:"line"})}),a.jsx("div",{className:"bg-white rounded-lg border shadow-md p-3",children:a.jsx(p,{options:W,series:l,type:"line"})})]})}const V=()=>{const n=i.useRef(null),[d,c]=i.useState(["2024-01"]),m=k.useReactToPrint({content:()=>n.current,pageStyle:`
       @page {
         size: A4 landscape;
         margin: 20mm;
       }
       @media print {
         html, body {
           height: initial !important;
           overflow: initial !important;
           -webkit-print-color-adjust: exact;
           print-color-adjust: exact;
         }
         .print-break {
           page-break-before: always;
         }
       }
     `});return a.jsx("div",{ref:n,className:"min-h-[100vh] w-full z-10 flex flex-col items-center",children:a.jsxs("div",{className:"w-[90%] flex flex-col gap-10 min-h-[10px]",children:[a.jsxs("div",{className:"w-ful items-center z-[4] justify-between px-5 flex min-h-[100px] bg-[#ebeff5] border rounded-sm md:flex-col md:py-2 md:gap-3",children:[a.jsx("div",{className:"flex gap-2 w-[500px] md:w-full",children:a.jsx(N,{onDateChange:c})}),a.jsx("div",{className:"z-[99999] w-[30%] md:w-full",children:a.jsx(S,{})})]}),a.jsx("div",{className:"relative w-full flex md:flex-col h-full justify-center gap-10 bg-white rounded-lg mb-5 border p-4 overflow-auto",children:a.jsx(R,{})}),a.jsx("div",{className:"relative flex md:flex-col h-full justify-between gap-10 bg-white rounded-lg w-full mb-5 border p-4 overflow-auto",children:a.jsx(z,{})}),a.jsx("div",{className:"relative w-full flex md:flex-col h-full justify-center gap-10 bg-white rounded-lg mb-5 border p-4",children:a.jsx(M,{})}),a.jsx("button",{onClick:m,className:"z-50 fixed bottom-5 right-5 bg-blue-500 text-white p-3 rounded-full shadow-lg print:hidden",children:"Print PDF"})]})})};export{V as UtiStatus,V as default};
