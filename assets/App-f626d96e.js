import{n as P,r as m,j as t,R as se,e as S,u as R,k as U,o as ae,h as ne,p as le,d as ce,i as oe,q as ie,t as re,v as de,L as G,O as ue}from"./index-d264289b.js";import{C as w}from"./chevron-down-33e58738.js";import{a as O}from"./axios-06ab4b27.js";const I=P("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),W=P("ListFilter",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M7 12h10",key:"b7w52i"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),me=P("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),he=P("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),fe={theme:"system",setTheme:()=>null},pe=m.createContext(fe);function ge({children:h,defaultTheme:d="system",storageKey:r="vite-ui-theme",...f}){const[i,A]=m.useState(()=>localStorage.getItem(r)||d);m.useEffect(()=>{const c=window.document.documentElement;if(c.classList.remove("light","dark"),i==="system"){const n=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";c.classList.add(n);return}c.classList.add(i)},[i]);const x={theme:i,setTheme:c=>{localStorage.setItem(r,c),A(c)}};return t.jsx(pe.Provider,{...f,value:x,children:h})}const L="/central/DICT.png",X=()=>{const[h,d]=se.useState(!0),r=S(),f=R(U),i=[{name:"Business Permit V1"},{name:"Business Permit V2"},{name:"Building Permit"},{name:"Certificate of Occupancy"},{name:"Working Permit"},{name:"Barangay Clearance"}],A=()=>{d(!h)},x=c=>{const n=f.includes(c)?f.filter(k=>k!==c):[...f,c];r(ae(n))};return t.jsxs("div",{className:h?"relative mt-2 outline-none w-full min-h-[280px] mb-5 rounded-[100px]":"rounded-none mt-2 outline-none relative w-full",children:[t.jsx("div",{className:"border-gray-300 outline-none mt-2 border-x-0 border-y-2 rounded-none",children:t.jsxs("button",{onClick:A,className:"w-full text-left outline-none rounded-none text-white px-4 py-2 focus:outline-none flex justify-between font-gsemibold",children:["eLGU Services ",t.jsx("span",{children:h?t.jsx(I,{className:"rotate-90"}):t.jsx(w,{})})]})}),h&&t.jsx("div",{className:"absolute w-full outline-none text-white pb-2 pt-2",children:i.map((c,n)=>t.jsxs("label",{className:"flex items-center px-4 py-2 text-sm cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:f.includes(c.name),onChange:()=>x(c.name),className:"mr-2 h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),c.name]},n))})]})},Y=()=>{const h=S(),d=R(ne),[r,f]=m.useState(!0),[i,A]=m.useState(()=>{const n=localStorage.getItem("charts");return n?JSON.parse(n):d.length?d:[{name:"Bar Graph",state:!0},{name:"Line Graph",state:!0},{name:"Pie Graph",state:!0}]});m.useEffect(()=>{h(le(i.filter(n=>n.state).map(n=>n.name))),localStorage.setItem("charts",JSON.stringify(i))},[i,h]);const x=()=>{f(!r)},c=n=>{A(k=>k.map(y=>y.name===n?{...y,state:!y.state}:y))};return t.jsxs("div",{className:r?"relative w-full h-[270px] rounded-[100px]":"rounded-none relative w-full",children:[t.jsx("div",{className:"border-gray-300 outline-none mt-2 border-x-0 border-y-2 rounded-none",children:t.jsxs("button",{onClick:x,className:"w-full text-left rounded-none text-white px-4 py-2 focus:outline-none flex justify-between font-gsemibold",children:["Data Presentation"," ",t.jsx("span",{children:r?t.jsx(I,{className:" rotate-90"}):t.jsx(w,{})})]})}),r&&t.jsx("div",{className:"absolute w-full text-white border-gray-300 pb-2 pt-2",children:i.map((n,k)=>t.jsxs("label",{className:"flex items-center px-4 py-2 text-sm cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:n.state,onChange:()=>c(n.name),className:"mr-2 h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),n.name]},k))})]})},E="data:image/png;base64,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";function Ae(){const h=R(ce),d=R(U),r=R(oe),f=S(),i=ie(),A=re(),x=[{name:"Reports",path:"/central/reports"},{name:"Utilization Status",path:"/central/utilization"},{name:"LGU",path:"/central/lgu"}],[c,n]=m.useState({}),k=(a,o,p)=>{if(!(o!=null&&o.length)||!a)return console.log("No dates or stats to filter"),a;const u=[...o].sort(),b=u[0],s=u[u.length-1],[e,l]=b.split("-").map(Number),[v,_]=s.split("-").map(Number),Q=[];let N=new Date(e,l-1);const $=new Date(v,_-1);for(;N<=$;)Q.push(`${N.getFullYear()}-${String(N.getMonth()+1).padStart(2,"0")}`),N.setMonth(N.getMonth()+1);const M={};return Object.entries(a).forEach(([ee,F])=>{F&&(M[ee]=F.filter(C=>Q.includes(C.date)).map(C=>{const j={};return C.values.forEach(g=>{if(p.includes(g.dictRo))switch(j[g.dictRo]||(j[g.dictRo]={operational:0,developmental:0,training:0,withdraw:0}),g.universalStatus){case"[A] Operational":j[g.dictRo].operational++;break;case"[B] Developmental":j[g.dictRo].developmental++;break;case"[C] For Training/Others":j[g.dictRo].training++;break;case"[D] Withdraw":j[g.dictRo].withdraw++;break}}),{date:C.date,data:Object.entries(j).map(([g,te])=>({region:g,...te}))}}).sort((C,j)=>C.date.localeCompare(j.date)))}),M};m.useEffect(()=>{if(r&&r.length>0&&c){const a=k(c,r,h);f(de(a)),console.log("Filtered Monthly Stats:",a)}},[c,r,h]);function y(){O.get("18kaPQlN0_kA9i7YAD-DftbdVPZX35Qf33sVMkw_TcWc/values/BP1 UR Input",{headers:{Authorization:"Token b22ac5a9da3ddc5088984eb00e3b122cd2f6d057fcc84cb6ff81daaabd151fff"}}).then(a=>{const u=a.data.values.slice(3).reduce((s,e)=>{const l=e[1],v={id:e[0],lguName:e[4],status:e[5],progressRate:e[6],concerns:e[7],actionItems:e[8],otherRemarks:e[9],universalStatus:e[10],mpar:e[11],geocode:e[12],name:e[13],province:e[14],region:e[15],district:e[16],level:e[17],incomeClass:e[18],dictRo:e[19]};return s[l]||(s[l]={date:l,values:[]}),s[l].values.push(v),s},{}),b=Object.values(u);n(s=>({...s,BP:b}))})}function z(){O.get("18kaPQlN0_kA9i7YAD-DftbdVPZX35Qf33sVMkw_TcWc/values/BPCO UR Input",{headers:{Authorization:"Token b22ac5a9da3ddc5088984eb00e3b122cd2f6d057fcc84cb6ff81daaabd151fff"}}).then(a=>{const u=a.data.values.slice(3).reduce((s,e)=>{const l=e[1],v={id:e[0],lguName:e[4],status:e[5],progressRate:e[6],concerns:e[7],actionItems:e[8],otherRemarks:e[9],universalStatus:e[10],mpar:e[11],geocode:e[12],name:e[13],province:e[14],region:e[15],district:e[16],level:e[16],incomeClass:e[17],dictRo:e[18]};return s[l]||(s[l]={date:l,values:[]}),s[l].values.push(v),s},{}),b=Object.values(u);n(s=>({...s,CO:b}))})}function J(){O.get("18kaPQlN0_kA9i7YAD-DftbdVPZX35Qf33sVMkw_TcWc/values/WP UR Input",{headers:{Authorization:"Token b22ac5a9da3ddc5088984eb00e3b122cd2f6d057fcc84cb6ff81daaabd151fff"}}).then(a=>{const u=a.data.values.slice(3).reduce((s,e)=>{const l=e[1],v={id:e[0],lguName:e[4],status:e[5],progressRate:e[6],concerns:e[7],actionItems:e[8],otherRemarks:e[9],universalStatus:e[10],mpar:e[11],geocode:e[12],name:e[13],province:e[14],region:e[15],district:e[16],level:e[16],incomeClass:e[17],dictRo:e[18]};return s[l]||(s[l]={date:l,values:[]}),s[l].values.push(v),s},{}),b=Object.values(u);n(s=>({...s,WP:b}))})}function q(){O.get("18kaPQlN0_kA9i7YAD-DftbdVPZX35Qf33sVMkw_TcWc/values/BC UR Input",{headers:{Authorization:"Token b22ac5a9da3ddc5088984eb00e3b122cd2f6d057fcc84cb6ff81daaabd151fff"}}).then(a=>{const u=a.data.values.slice(3).reduce((s,e)=>{const l=e[1],v={id:e[0],lguName:e[4],status:e[5],progressRate:e[6],concerns:e[7],actionItems:e[8],otherRemarks:e[9],universalStatus:e[10],mpar:e[11],geocode:e[12],name:e[13],province:e[14],region:e[15],district:e[16],level:e[16],incomeClass:e[17],dictRo:e[18]};return s[l]||(s[l]={date:l,values:[]}),s[l].values.push(v),s},{}),b=Object.values(u);n(s=>({...s,BC:b}))})}m.useEffect(()=>{n({}),d.includes("Building Permit")&&y(),d.includes("Certificate of Occupancy")&&z(),d.includes("Working Permit")&&J(),d.includes("Barangay Clearance")&&q(),console.log("Selected services:",d)},[d]);const[H,T]=m.useState(()=>{const a=localStorage.getItem("activeMenuItem");if(a)return a;const o=i.pathname,p=x.find(u=>o.includes(u.path.split("/").pop()||""));return p?p.name:"Reports"});m.useEffect(()=>{const a=i.pathname,o=x.find(p=>a.includes(p.path.split("/").pop()||""));o&&(T(o.name),localStorage.setItem("activeMenuItem",o.name))},[i.pathname]);const V=(a,o)=>{T(a),localStorage.setItem("activeMenuItem",a),A(o)},[Z,xe]=m.useState(!1),[D,B]=m.useState(!1),K=()=>{window.scrollTo({top:0,behavior:"smooth"})};return t.jsx(ge,{defaultTheme:"light",storageKey:"vite-ui-theme",children:t.jsxs("div",{className:"min-h-screen w-full flex",children:[t.jsxs("nav",{className:"fixed top-0 left-0 w-[20vw] lg:hidden h-screen bg-[#0136a8] z-[99999] flex flex-col items-start p-5",children:[t.jsx(G,{className:"flex w-full mr-5 gap-2",to:"/central/",children:t.jsx("img",{src:L,className:"logo h-20 object-contain self-center",alt:"DICT logo"})}),t.jsx("h1",{className:"text-white font-gmedium text-xl mt-10",children:"DATA DASHBOARD"}),t.jsxs("div",{className:"text-white flex gap-1 font-gmedium mt-4",children:[t.jsx(W,{})," Filter"]}),t.jsx(X,{}),t.jsx(Y,{})]}),t.jsx("div",{className:"min-h-[100vh] w-full z-10 flex flex-col items-center",children:t.jsxs("div",{className:"w-[90%] flex flex-col gap-10 min-h-[10px] ",children:[t.jsxs("div",{className:"hidden md:grid-cols-2 w-full items-start z-[50] justify-center md:flex px-5 md:mt-5 min-h-[70px] rounded-sm md:flex-col md:gap-3 ",children:[t.jsx("button",{className:`text-accent bg-[#0136a8] p-2 absolute  rounded-md shadow-md ${D?"hidden":""}`,onClick:()=>B(!D),children:t.jsx(me,{})}),t.jsxs("div",{className:"flex gap-2 items-center md:ml-28 md:fixed lg:hidden",children:[t.jsx("div",{className:"font-gsemibold md:text-xs",children:"Welcome, (Regor)"}),t.jsx("img",{className:"rounded-full w-10 h-10 md:mr-5",src:E,alt:""})]})]}),D&&t.jsxs("nav",{className:"fixed top-0 md:overflow-auto md:h-full left-0 md:w-64 h-screen bg-[#0136a8] z-[99999] flex flex-col items-start p-5",children:[t.jsx("button",{className:"absolute top-4 left-52 text-white",onClick:()=>B(!1),children:t.jsx(he,{className:"bg-red-600 rounded-sm",size:32})}),t.jsx(G,{className:"flex w-full mr-5 gap-2",to:"/central/",children:t.jsx("img",{src:L,className:"logo h-20 object-contain self-center",alt:"DICT logo"})}),t.jsx("h1",{className:"text-white font-gmedium text-xl mt-10",children:"DATA DASHBOARD"}),t.jsxs("div",{className:"text-white flex gap-1 font-gmedium mt-4",children:[t.jsx(W,{})," Filter"]}),t.jsx(X,{}),t.jsx(Y,{})]}),D&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 md:transition-opacity md:duration-300 md:ease-in-out",onClick:()=>B(!1)}),t.jsxs("div",{className:"flex-1 ml-[20vw] lg:ml-0 ",children:[t.jsxs("header",{className:"md:fixed md:mt-24 sticky top-0 z-20 bg-white/20 backdrop-blur-md h-[100px] w-full px-20 md:px-5 flex items-center justify-between text-[#6B6B6B]",children:[t.jsx("ul",{className:"flex gap-10 md:text-base md:gap-5",children:x.map(a=>t.jsx("li",{onClick:()=>V(a.name,a.path),className:`border border-t-0 border-r-0 border-l-0 cursor-pointer ${H===a.name?"border-b-2 border-[#0136a8] font-gsemibold text-[#0136a8]":"border-b-0 hover:border-b-2 hover:border-[#0136a8] hover:font-gsemibold hover:text-[#0136a8]"}`,children:a.name},a.name))}),t.jsxs("div",{className:"flex gap-2 items-center lg:hidden ",children:[t.jsx("img",{className:"rounded-full w-10 h-10 ",src:E,alt:""}),t.jsx("div",{className:"font-gsemibold ",children:"Welcome, (Regor)"})]})]}),t.jsx("main",{className:"w-full",children:t.jsx(ue,{})}),Z&&t.jsx("button",{onClick:K,className:"fixed bottom-6 right-6 p-3 bg-[#0136a8] text-white rounded-full shadow-lg hover:bg-blue-700 transition",children:t.jsx(I,{size:24})})]})]})})]})})}export{Ae as default};
